<!DOCTYPE html><html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'><title>Mengjie's UVI World Engine</title><link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/><style>html,body,#map{height:100%;margin:0;} .panel{position:absolute;left:10px;background:#fff;padding:8px 10px;border:1px solid #ddd;border-radius:6px;box-shadow:0 1px 3px rgba(0,0,0,0.1);} .panel-title{top:10px;} .panel-help{top:70px;} .brand{font-size:16px;font-weight:600;color:#111} .by{font-size:12px;color:#444;margin-top:2px} .btn{display:inline-block;padding:4px 8px;border:1px solid #888;border-radius:4px;margin:2px 0;cursor:pointer;} .small{font-size:12px;color:#333} ul{margin:4px 0 0 14px;padding:0;} li{margin:0;padding:0;} </style></head><body><div id='map'></div><div class='panel panel-title'><div class='brand'>Mengjie's UVI World Engine</div><div class='by'>by Mengjie Fan</div></div><div class='panel panel-help small'>Click a city marker to see cached dates and a copyable CLI command.</div><script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script><script>const CITIES = [{"name": "New York, US", "lat": 40.7128, "lon": -74.006, "tz": "America/New_York", "dates": ["2025-08-17"]}, {"name": "Los Angeles, US", "lat": 34.0522, "lon": -118.2437, "tz": "America/Los_Angeles", "dates": ["2025-08-26"]}, {"name": "Chicago, US", "lat": 41.8781, "lon": -87.6298, "tz": "America/Chicago", "dates": []}, {"name": "Toronto, CA", "lat": 43.6532, "lon": -79.3832, "tz": "America/Toronto", "dates": []}, {"name": "Mexico City, MX", "lat": 19.4326, "lon": -99.1332, "tz": "America/Mexico_City", "dates": []}, {"name": "Sao Paulo, BR", "lat": -23.5505, "lon": -46.6333, "tz": "America/Sao_Paulo", "dates": []}, {"name": "Buenos Aires, AR", "lat": -34.6037, "lon": -58.3816, "tz": "America/Argentina/Buenos_Aires", "dates": []}, {"name": "London, UK", "lat": 51.5074, "lon": -0.1278, "tz": "Europe/London", "dates": ["2025-06-21"]}, {"name": "Paris, FR", "lat": 48.8566, "lon": 2.3522, "tz": "Europe/Paris", "dates": []}, {"name": "Berlin, DE", "lat": 52.52, "lon": 13.405, "tz": "Europe/Berlin", "dates": []}, {"name": "Madrid, ES", "lat": 40.4168, "lon": -3.7038, "tz": "Europe/Madrid", "dates": []}, {"name": "Rome, IT", "lat": 41.9028, "lon": 12.4964, "tz": "Europe/Rome", "dates": ["2025-08-17"]}, {"name": "Palermo, IT", "lat": 38.1157, "lon": 13.3615, "tz": "Europe/Rome", "dates": ["2025-08-17"]}, {"name": "Catania, IT", "lat": 37.5079, "lon": 15.083, "tz": "Europe/Rome", "dates": ["2025-08-17"]}, {"name": "Istanbul, TR", "lat": 41.0082, "lon": 28.9784, "tz": "Europe/Istanbul", "dates": []}, {"name": "Dubai, AE", "lat": 25.2048, "lon": 55.2708, "tz": "Asia/Dubai", "dates": []}, {"name": "Cairo, EG", "lat": 30.0444, "lon": 31.2357, "tz": "Africa/Cairo", "dates": []}, {"name": "Johannesburg, ZA", "lat": -26.2041, "lon": 28.0473, "tz": "Africa/Johannesburg", "dates": []}, {"name": "Nairobi, KE", "lat": -1.2921, "lon": 36.8219, "tz": "Africa/Nairobi", "dates": []}, {"name": "Moscow, RU", "lat": 55.7558, "lon": 37.6173, "tz": "Europe/Moscow", "dates": []}, {"name": "Tokyo, JP", "lat": 35.6762, "lon": 139.6503, "tz": "Asia/Tokyo", "dates": []}, {"name": "Shanghai, CN", "lat": 31.2304, "lon": 121.4737, "tz": "Asia/Shanghai", "dates": []}, {"name": "Singapore, SG", "lat": 1.3521, "lon": 103.8198, "tz": "Asia/Singapore", "dates": []}, {"name": "Hong Kong, HK", "lat": 22.3193, "lon": 114.1694, "tz": "Asia/Hong_Kong", "dates": []}, {"name": "Mumbai, IN", "lat": 19.076, "lon": 72.8777, "tz": "Asia/Kolkata", "dates": []}, {"name": "Sydney, AU", "lat": -33.8688, "lon": 151.2093, "tz": "Australia/Sydney", "dates": ["2025-12-21"]}, {"name": "Melbourne, AU", "lat": -37.8136, "lon": 144.9631, "tz": "Australia/Melbourne", "dates": []}, {"name": "Seoul, KR", "lat": 37.5665, "lon": 126.978, "tz": "Asia/Seoul", "dates": []}, {"name": "Beijing, CN", "lat": 39.9042, "lon": 116.4074, "tz": "Asia/Shanghai", "dates": []}];
const map = L.map('map',{worldCopyJump:true}).setView([20,0], 2);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom: 8, attribution: '&copy; OpenStreetMap contributors'}).addTo(map);
function popupHtml(c){const lat=c.lat.toFixed(4),lon=c.lon.toFixed(4);let h=`<b>${c.name}</b><br><span class=small>${lat}, ${lon} — ${c.tz}</span>`; if(c.dates.length){h+=`<div class=small><b>Cached dates:</b><ul>`; c.dates.forEach(d=>{const outCsv=`outputs/uv_minute_${lat}_${lon}_${d}.csv`; h+=`<li>${d} — <a href='${outCsv}' target='_blank'>CSV</a> <span class=btn onclick=copyCmd('${lat}','${lon}','${d}')>Copy CLI</span></li>`}); h+='</ul></div>'; } else { h+=`<div class=small>No cached datasets. <span class=btn onclick=copyCmd('${lat}','${lon}', new Date().toISOString().slice(0,10))>Copy CLI for today</span></div>`;} return h;}
function copyCmd(lat,lon,date){const cmd=`python uv_minute_app.py --lat ${lat} --lon ${lon} --date ${date} --source api --outdir outputs --html`; navigator.clipboard.writeText(cmd).then(()=>{alert('Copied to clipboard:
'+cmd);});}
CITIES.forEach(c=>{const m=L.marker([c.lat,c.lon]).addTo(map); m.bindPopup(popupHtml(c)); m.bindTooltip(c.name);});
</script></body></html>